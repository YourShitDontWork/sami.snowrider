<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CELEX - Juegos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1e1e1e;
      color: white;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #00ffff;
    }
    #authContainer {
      max-width: 300px;
      margin: 40px auto;
      background: #2e2e2e;
      padding: 20px;
      border-radius: 8px;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border: none;
      border-radius: 4px;
    }
    input {
      background-color: #444;
      color: white;
    }
    button {
      background-color: #00cccc;
      color: white;
      cursor: pointer;
    }
    #userIcon {
      position: fixed;
      top: 10px;
      right: 10px;
      background-color: #00cccc;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: #fff;
      cursor: pointer;
      z-index: 1000;
    }
    #userInfo {
      position: fixed;
      top: 60px;
      right: 10px;
      background-color: #2e2e2e;
      padding: 10px;
      border-radius: 8px;
      display: none;
      z-index: 1000;
    }
    #searchContainer {
      text-align: center;
      margin: 20px 0;
    }
    #searchContainer input {
      width: 50%;
    }
    #gameGrid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    .game-card {
      background-color: #2e2e2e;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .game-card:hover {
      transform: scale(1.05);
    }
    .game-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    .game-card p {
      margin: 10px;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>

<h1>CELEX - Juegos</h1>

<!-- Login -->
<div id="authContainer">
  <h2 style="text-align:center; margin-bottom:10px;">Iniciar Sesión</h2>
  <input type="text" id="userInput" placeholder="Usuario" />
  <input type="password" id="keyInput" placeholder="Clave" />
  <button id="loginBtn">Entrar</button>
  <div id="loginMessage" style="margin-top:10px; text-align:center; color:#ff5555;"></div>
</div>

<!-- Icono de usuario -->
<div id="userIcon" title="Usuario" style="display:none;"></div>

<!-- Info usuario -->
<div id="userInfo"></div>

<!-- Panel oculto hasta login -->
<div id="mainPanel" style="display:none;">
  <!-- Buscador -->
  <div id="searchContainer">
    <input type="text" id="searchInput" placeholder="Buscar juego..." />
  </div>

  <!-- Juegos -->
  <div id="gameGrid">
    <div class="game-card" onclick="window.open('juegos/juego1/index.html','_blank')">
      <img src="juegos/juego1/portada.jpg" alt="Juego 1" />
      <p>Juego 1</p>
    </div>
    <div class="game-card" onclick="window.open('juegos/juego2/index.html','_blank')">
      <img src="juegos/juego2/portada.jpg" alt="Juego 2" />
      <p>Juego 2</p>
    </div>
    <div class="game-card" onclick="window.open('juegos/juego3/index.html','_blank')">
      <img src="juegos/juego3/portada.jpg" alt="Juego 3" />
      <p>Juego 3</p>
    </div>
    <!-- Agrega más juegos aquí -->
  </div>
</div>

<script>
// Usuarios y claves
const usuarios = {
  "admin": {
    clave: "dueño",
    plan: "premium",
    caducidad: "2025-12-31"
  },
  "user1": {
    clave: "abc123",
    plan: "gratis",
    caducidad: "2025-06-15"
  }
};

let usuarioActual = null;

const loginBtn = document.getElementById("loginBtn");
const userInput = document.getElementById("userInput");
const keyInput = document.getElementById("keyInput");
const loginMessage = document.getElementById("loginMessage");
const authContainer = document.getElementById("authContainer");
const mainPanel = document.getElementById("mainPanel");
const userIcon = document.getElementById("userIcon");
const userInfo = document.getElementById("userInfo");
const searchInput = document.getElementById("searchInput");
const gameCards = document.querySelectorAll(".game-card");

// Ocultar todo al cargar
window.onload = () => {
  mainPanel.style.display = "none";
  userIcon.style.display = "none";
  userInfo.style.display = "none";
};

// Login
loginBtn.onclick = () => {
  const user = userInput.value.trim();
  const key = keyInput.value.trim();
  if (usuarios[user] && usuarios[user].clave === key) {
    usuarioActual = { ...usuarios[user], nombre: user };
    mostrarContenido();
  } else {
    loginMessage.innerText = "Usuario o clave incorrecta.";
    ocultarContenido();
  }
};

function mostrarContenido() {
  authContainer.style.display = "none";
  mainPanel.style.display = "block";
  userIcon.style.display = "flex";
  loginMessage.innerText = "";
  userIcon.innerHTML = usuarioActual.nombre.charAt(0).toUpperCase();
}

function ocultarContenido() {
  mainPanel.style.display = "none";
  userIcon.style.display = "none";
}

// Mostrar info del usuario
userIcon.onclick = () => {
  if (!usuarioActual) return;
  const { plan, caducidad, nombre } = usuarioActual;
  const today = new Date().toISOString().slice(0, 10);
  userInfo.innerHTML = `
    <strong>Usuario:</strong> ${nombre}<br>
    <strong>Plan:</strong> ${plan}<br>
    <strong>Cierre plan:</strong> ${caducidad}<br>
    <em>Hoy: ${today}</em>
  `;
  userInfo.style.display = userInfo.style.display === "block" ? "none" : "block";
};

document.addEventListener("click", (e) => {
  if (!userInfo.contains(e.target) && e.target !== userIcon) {
    userInfo.style.display = "none";
  }
});

// Buscador
searchInput.addEventListener("input", function () {
  const query = this.value.toLowerCase();
  document.querySelectorAll(".game-card").forEach(card => {
    const title = card.querySelector("p").textContent.toLowerCase();
    card.style.display = title.includes(query) ? "block" : "none";
  });
});
</script>
</body>
</html>
