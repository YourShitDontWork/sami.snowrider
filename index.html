<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CELEX - Juegos</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet" />
  <style>
    /* Fuente y resets */
    * {
      box-sizing: border-box;
    }
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Montserrat', sans-serif;
      background: #000;
      color: #eee;
      overflow-x: hidden;
    }

    /* Fondo animado nieve */
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: black;
      z-index: -2;
    }
    .snowflake {
      position: fixed;
      top: -10px;
      color: #fff;
      user-select: none;
      z-index: -1;
      font-size: 1em;
      opacity: 0.8;
      animation-name: fall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }
    @keyframes fall {
      0% { transform: translateY(0) translateX(0); }
      100% { transform: translateY(100vh) translateX(20px); }
    }

    /* Contenedor general */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Titulo neón centrado */
    h1 {
      font-weight: 700;
      font-size: 3rem;
      text-align: center;
      margin-bottom: 30px;
      color: #0ff;
      text-shadow:
        0 0 5px #0ff,
        0 0 10px #0ff,
        0 0 20px #0ff,
        0 0 40px #0ff;
      user-select: none;
    }

    /* Panel usuario superior derecho */
    #userPanel {
      position: fixed;
      top: 20px;
      right: 20px;
      display: none;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      background: rgba(0, 255, 255, 0.1);
      padding: 8px 12px;
      border-radius: 8px;
      font-weight: 600;
      color: #0ff;
      user-select: none;
      z-index: 100;
    }
    #userPanel:hover {
      background: rgba(0, 255, 255, 0.3);
    }
    #userIcon {
      font-size: 1.3rem;
      user-select: none;
    }

    /* Ventana info usuario */
    #userInfo {
      position: fixed;
      top: 60px;
      right: 20px;
      background: #111;
      border: 2px solid #0ff;
      padding: 12px 18px;
      border-radius: 10px;
      display: none;
      width: 240px;
      color: #0ff;
      font-size: 0.9rem;
      user-select: none;
      z-index: 110;
    }
    #userInfo b {
      display: inline-block;
      width: 100px;
      color: #0ff;
    }
    #logoutBtn {
      margin-top: 12px;
      background: #0ff;
      border: none;
      color: #000;
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      user-select: none;
    }
    #logoutBtn:hover {
      background: #0cc;
    }

    /* Formulario Login / Registro */
    .form-container {
      max-width: 350px;
      margin: 0 auto 40px auto;
      background: #111;
      border-radius: 12px;
      padding: 25px 30px;
      box-shadow: 0 0 20px #0ff;
    }
    .form-container h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #0ff;
      font-weight: 700;
      user-select: none;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #0ff;
      user-select: none;
    }
    input[type="text"], input[type="password"] {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 18px;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      outline: none;
      background: #222;
      color: #eee;
    }
    input::placeholder {
      color: #777;
    }
    button {
      width: 100%;
      padding: 12px 0;
      font-weight: 700;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background: #0ff;
      color: #000;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #0cc;
    }
    .toggle-link {
      margin-top: 14px;
      text-align: center;
      color: #0ff;
      cursor: pointer;
      user-select: none;
    }
    .toggle-link:hover {
      text-decoration: underline;
    }
    .hidden {
      display: none;
    }

    /* Buscador */
    #searchGamesContainer {
      max-width: 900px;
      margin: 0 auto 25px auto;
      display: none;
    }
    #searchInput {
      width: 100%;
      padding: 10px 14px;
      font-size: 1rem;
      border-radius: 10px;
      border: none;
      background: #222;
      color: #eee;
      outline: none;
      user-select: none;
    }
    #searchInput::placeholder {
      color: #777;
    }

    /* Grid de juegos */
    #gameGrid {
      display: none;
      max-width: 900px;
      margin: 0 auto 60px auto;
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(140px,1fr));
      gap: 20px;
    }
    .game {
      background: #111;
      border-radius: 12px;
      box-shadow: 0 0 15px #0ff;
      overflow: hidden;
      user-select: none;
      transition: transform 0.2s ease;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
    }
    .game:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px #0ff;
    }
    .game img {
      width: 100%;
      height: 100px;
      object-fit: contain;
      margin-bottom: 10px;
      border-radius: 8px;
      background: #000;
    }
    .game-title {
      text-align: center;
      font-weight: 700;
      color: #0ff;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <!-- Fondo copitos de nieve (lo genero con JS abajo) -->

  <h1>CELEX - Juegos</h1>

  <!-- Panel usuario arriba derecha -->
  <div id="userPanel" onclick="toggleUserInfo()">
    <span id="displayUser"></span>
    <span id="userIcon">👤</span>
  </div>

  <!-- Ventana info usuario -->
  <div id="userInfo">
    <div><b>Usuario:</b> <span id="infoUser"></span></div>
    <div><b>Registrado:</b> <span id="infoRegistered"></span></div>
    <div><b>Premium:</b> <span id="infoPremium"></span></div>
    <div><b>Expira:</b> <span id="infoExpire"></span></div>
    <button id="logoutBtn" onclick="logout()">Cerrar sesión</button>
  </div>

  <!-- Formularios Login y Registro -->
  <div id="loginContainer" class="form-container">
    <h2>Iniciar Sesión</h2>
    <label for="loginUser">Usuario</label>
    <input type="text" id="loginUser" placeholder="Usuario" autocomplete="off" />
    <label for="loginPassword">Contraseña</label>
    <input type="password" id="loginPassword" placeholder="Contraseña" autocomplete="off" />
    <button onclick="login()">Iniciar Sesión</button>
    <div class="toggle-link" onclick="showRegister()">¿No tienes cuenta? Regístrate</div>
  </div>

  <div id="registerContainer" class="form-container hidden">
    <h2>Registro</h2>
    <label for="regUser">Usuario</label>
    <input type="text" id="regUser" placeholder="Usuario" autocomplete="off" />
    <label for="regPass">Contraseña</label>
    <input type="password" id="regPass" placeholder="Contraseña" autocomplete="off" />
    <label for="regRepeat">Repetir Contraseña</label>
    <input type="password" id="regRepeat" placeholder="Repetir Contraseña" autocomplete="off" />
    <button onclick="register()">Registrarse</button>
    <div class="toggle-link" onclick="showLogin()">¿Ya tienes cuenta? Inicia sesión</div>
  </div>

  <!-- Buscador de juegos -->
  <div id="searchGamesContainer">
    <input type="text" id="searchInput" placeholder="Buscar juegos..." onkeyup="searchGames()" />
  </div>

  <!-- Grid de juegos -->
  <div id="gameGrid">
    <div class="game">
      <a href="Slope-Source-code-main/index.html" target="_blank" rel="noopener noreferrer">
        <img src="Slope-Source-code-main/TemplateData/OIP.ico" alt="Slope" />
        <div class="game-title">Slope</div>
      </a>
    </div>
    <div class="game">
      <a href="Subway-Surfers/index.html" target="_blank" rel="noopener noreferrer">
        <img src="R.png" alt="Subway Surfers" />
        <div class="game-title">Subway Surfers</div>
      </a>
    </div>
    <div class="game">
      <a href="BurritoBison-main/index.html" target="_blank" rel="noopener noreferrer">
        <img src="BurritoBison-main/images/burrito-png.png" alt="Burrito Bison" />
        <div class="game-title">Burrito Bison</div>
      </a>
    </div>
    <div class="game">
      <a href="drive-mad-main/index.html" target="_blank" rel="noopener noreferrer">
        <img src="drive-mad-main/webapp/cover.jpg" alt="Drive Mad" />
        <div class="game-title">Drive Mad</div>
      </a>
    </div>
    <div class="game">
      <a href="1v1lol/" target="_blank" rel="noopener noreferrer">
        <img src="1v1lol/logo.png" alt="1v1.lol" />
        <div class="game-title">1v1.lol</div>
      </a>
    </div>
    <div class="game">
      <a href="bitlife/index.html" target="_blank" rel="noopener noreferrer">
        <img src="bitlife/logo.png" alt="Bitlife" />
        <div class="game-title">Bitlife</div>
      </a>
    </div>
    <div class="game">
      <a href="driftboss/index.html" target="_blank" rel="noopener noreferrer">
        <img src="driftboss/branding/logo1.png" alt="Drift Boss" />
        <div class="game-title">Drift Boss</div>
      </a>
    </div>
    <div class="game">
      <a href="happywheels/index.html" target="_blank" rel="noopener noreferrer">
        <img src="happywheels/166950-HUdYLFwSkLSLQIwO.png" alt="Happy Wheels" />
        <div class="game-title">Happy Wheels</div>
      </a>
    </div>
    <div class="game">
      <a href="pacman/index.html" target="_blank" rel="noopener noreferrer">
        <img src="pacman/sejarah-penciptaan-game-legendaris-pac-man-10aXQ8DlD0.jpg" alt="Pacman" />
        <div class="game-title">Pacman</div>
      </a>
    </div>
    <div class="game">
      <a href="skibidi1v100/index.html" target="_blank" rel="noopener noreferrer">
        <img src="skibidi1v100/logo.png" alt="Skibidi 1v100" />
        <div class="game-title">Skibidi 1v100</div>
      </a>
    </div>
    <div class="game">
      <a href="snowrider3d/index.html" target="_blank" rel="noopener noreferrer">
        <img src="snowrider3d/snow.png" alt="Snow Rider 3D" />
        <div class="game-title">Snow Rider 3D</div>
      </a>
    </div>
    <div class="game">
      <a href="volleyrandom/index.html" target="_blank" rel="noopener noreferrer">
        <img src="volleyrandom/splash.png" alt="Volley Random" />
        <div class="game-title">Volley Random</div>
      </a>
    </div>
  </div>

  <script>
    // Generar nieve animada
    const snowCount = 60;
    for(let i=0; i<snowCount; i++) {
      const snowflake = document.createElement('div');
      snowflake.classList.add('snowflake');
      snowflake.textContent = '❄';
      snowflake.style.left = Math.random() * 100 + 'vw';
      snowflake.style.animationDuration = (5 + Math.random() * 10) + 's';
      snowflake.style.fontSize = (10 + Math.random() * 20) + 'px';
      snowflake.style.opacity = Math.random();
      snowflake.style.animationDelay = (Math.random() * 10) + 's';
      document.body.appendChild(snowflake);
    }

    // Elementos UI
    const loginContainer = document.getElementById('loginContainer');
    const registerContainer = document.getElementById('registerContainer');
    const userPanel = document.getElementById('userPanel');
    const displayUser = document.getElementById('displayUser');
    const userInfo = document.getElementById('userInfo');
    const infoUser = document.getElementById('infoUser');
    const infoRegistered = document.getElementById('infoRegistered');
    const infoPremium = document.getElementById('infoPremium');
    const infoExpire = document.getElementById('infoExpire');
    const searchGamesContainer = document.getElementById('searchGamesContainer');
    const gameGrid = document.getElementById('gameGrid');
    const searchInput = document.getElementById('searchInput');

    // Guardar usuarios en localStorage:
    // Estructura localStorage "users":
    // {
    //   "usuario1": {password:"hash", registered:"fecha", premium:false, expire:"fecha"},
    //   "usuario2": {...}
    // }
    // En "sessionStorage" guardamos el usuario logueado: sessionStorage.setItem('currentUser', usuario);

    // Para simplicidad, contraseña se guarda en texto plano (no recomendable en real)

    function loadUsers() {
      const raw = localStorage.getItem('users');
      return raw ? JSON.parse(raw) : {};
    }
    function saveUsers(users) {
      localStorage.setItem('users', JSON.stringify(users));
    }

    function showRegister() {
      loginContainer.classList.add('hidden');
      registerContainer.classList.remove('hidden');
      clearInputs();
    }
    function showLogin() {
      registerContainer.classList.add('hidden');
      loginContainer.classList.remove('hidden');
      clearInputs();
    }
    function clearInputs() {
      document.querySelectorAll('input').forEach(i => i.value = '');
    }

    // Registro
    function register() {
      const user = document.getElementById('regUser').value.trim();
      const pass = document.getElementById('regPass').value;
      const passRepeat = document.getElementById('regRepeat').value;

      if(user === '' || pass === '' || passRepeat === '') {
        alert('Por favor completa todos los campos.');
        return;
      }
      if(pass !== passRepeat) {
        alert('Las contraseñas no coinciden.');
        return;
      }

      const users = loadUsers();
      if(users[user]) {
        alert('El nombre de usuario ya existe.');
        return;
      }

      // Crear nuevo usuario
      users[user] = {
        password: pass,
        registered: new Date().toISOString(),
        premium: false,
        expire: null
      };
      saveUsers(users);
      alert('Registro exitoso. Ahora inicia sesión.');
      showLogin();
    }

    // Inicio sesión
    function login() {
      const user = document.getElementById('loginUser').value.trim();
      const pass = document.getElementById('loginPassword').value;
      if(user === '' || pass === '') {
        alert('Por favor completa todos los campos.');
        return;
      }

      const users = loadUsers();
      if(!users[user]) {
        alert('Usuario no encontrado.');
        return;
      }
      if(users[user].password !== pass) {
        alert('Contraseña incorrecta.');
        return;
      }

      // Login correcto
      sessionStorage.setItem('currentUser', user);
      showUserPanel();
      clearInputs();
      showGames();
    }

    // Mostrar juegos y UI usuario
    function showGames() {
      loginContainer.style.display = 'none';
      registerContainer.style.display = 'none';
      searchGamesContainer.style.display = 'block';
      gameGrid.style.display = 'grid';
    }

    function showUserPanel() {
      const user = sessionStorage.getItem('currentUser');
      if(!user) {
        userPanel.style.display = 'none';
        userInfo.style.display = 'none';
        searchGamesContainer.style.display = 'none';
        gameGrid.style.display = 'none';
        loginContainer.style.display = 'block';
        registerContainer.style.display = 'none';
        return;
      }
      userPanel.style.display = 'flex';
      displayUser.textContent = user;

      // Mostrar info usuario en ventana
      const users = loadUsers();
      const data = users[user];

      infoUser.textContent = user;
      infoRegistered.textContent = new Date(data.registered).toLocaleDateString();
      infoPremium.textContent = data.premium ? 'Sí' : 'No';
      infoExpire.textContent = data.expire ? new Date(data.expire).toLocaleDateString() : '-';

      showGames();
    }

    // Toggle ventana info usuario
    function toggleUserInfo() {
      if(userInfo.style.display === 'block') {
        userInfo.style.display = 'none';
      } else {
        userInfo.style.display = 'block';
      }
    }

    // Cerrar sesión
    function logout() {
      sessionStorage.removeItem('currentUser');
      userInfo.style.display = 'none';
      userPanel.style.display = 'none';
      gameGrid.style.display = 'none';
      searchGamesContainer.style.display = 'none';
      loginContainer.style.display = 'block';
      registerContainer.style.display = 'none';
      clearInputs();
    }

    // Buscar juegos (filtra por texto)
    function searchGames() {
      const term = searchInput.value.toLowerCase();
      const games = gameGrid.querySelectorAll('.game');
      games.forEach(game => {
        const title = game.querySelector('.game-title').textContent.toLowerCase();
        if(title.includes(term)) {
          game.style.display = 'flex';
        } else {
          game.style.display = 'none';
        }
      });
    }

    // Al cargar la página detecta si hay usuario logueado
    window.onload = () => {
      if(sessionStorage.getItem('currentUser')) {
        showUserPanel();
      }
    };
  </script>
</body>
</html>
